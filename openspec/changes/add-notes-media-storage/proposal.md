# Change: 添加注释媒体文件存储功能

## Why

当前注释编辑器中的图片和视频使用 base64 编码直接嵌入到 HTML 中，存在以下问题：
1. **性能问题**：base64 编码会使文件体积增大约 33%，且直接嵌入 HTML 导致数据文件过大
2. **存储效率低**：每个模板的注释都包含完整的媒体文件数据，重复存储浪费空间
3. **缺乏剪切板支持**：用户无法直接从剪切板粘贴图片或视频
4. **切换模板时注释加载失败**：切换提示词时，注释内容没有正确加载

需要实现：
- 将图片和视频文件存储到应用目录
- 在注释中使用文件路径引用（指针）而不是 base64
- 支持从剪切板直接粘贴图片和视频
- 确保切换模板时正确加载对应的注释内容

## What Changes

1. **文件存储架构**：
   - 在应用数据目录创建 `media/` 子目录用于存储媒体文件
   - 媒体文件命名规则：`{templateId}_{timestamp}_{hash}.{ext}`
   - 通过 Tauri 文件系统 API 保存和读取文件

2. **注释数据模型**：
   - 修改注释存储格式，使用路径引用替代 base64
   - HTML 中的图片/视频标签使用相对路径或应用内路径
   - 保存时提取并存储媒体文件路径

3. **剪切板支持**：
   - 监听 Tiptap 编辑器的粘贴事件
   - 检测剪切板中的图片和视频数据
   - 自动保存到媒体目录并插入路径引用

4. **文件加载机制**：
   - 读取注释时，将路径引用转换为可访问的 URL（Tauri 中使用 `asset://` 或 `file://`）
   - 确保图片和视频能正确显示

5. **模板切换修复**：
   - 修复切换模板时注释内容不更新的问题
   - 确保每个模板的注释独立加载和保存

## Impact

- **受影响的组件**：
  - `NotesEditor.jsx` - 添加剪切板监听和文件路径处理
  - `NotesExpandedModal.jsx` - 同步文件路径处理逻辑
  - `NotesToolbar.jsx` - 修改图片/视频插入逻辑，保存文件而非 base64
  - `App.jsx` - 修复模板切换时注释加载问题
  - `tauri-service.js` - 添加媒体文件保存和读取函数
  - Rust 后端 (`src-tauri/src/lib.rs`) - 添加文件操作命令
  - `Cargo.toml` - 添加必要的文件系统依赖

- **数据迁移**：
  - 需要处理现有 base64 格式的注释，可选择迁移或兼容处理

- **用户体验**：
  - 提升性能，减少数据文件大小
  - 支持剪切板粘贴，提升编辑效率
  - 修复切换模板时的注释加载问题
