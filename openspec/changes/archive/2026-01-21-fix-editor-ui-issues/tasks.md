## 1. 修复 PlainTextEditor 双层文字问题

- [x] 1.1 分析高亮层的渲染逻辑，确保只显示变量高亮而不显示原始文本
- [x] 1.2 调整高亮层样式，使非变量文本透明或隐藏
- [x] 1.3 验证框选时不再出现双重文字

## 2. 修复变量交互功能

- [x] 2.1 检查变量点击事件处理逻辑
- [x] 2.2 修复变量元素的 pointerEvents 和事件绑定
- [x] 2.3 验证点击变量能正常打开选择器
- [x] 2.4 验证变量选择能正确更新内容

## 3. 重构 NotesEditor 布局

- [x] 3.1 修改 NotesEditor 从绝对定位改为固定在编辑栏下方
- [x] 3.2 调整 App.jsx 布局，将 NotesEditor 移出编辑框容器
- [x] 3.3 设置默认高度，确保注释板块始终可见
- [x] 3.4 验证注释板块不再遮挡编辑器内容

## 4. 实现展开按钮功能

- [x] 4.1 设计独立窗口/视图的展示方案
- [x] 4.2 实现展开按钮点击事件处理
- [x] 4.3 创建注释内容的独立展示组件或窗口
- [x] 4.4 验证展开功能正常工作

## 5. 添加多语言支持

- [x] 5.1 在 translations.js 中添加 notes 和 save_notes 翻译键（如果缺失）
- [x] 5.2 确保 NotesEditor 中所有用户可见文本使用翻译函数
- [x] 5.3 验证中英文切换时文本正确显示

## 6. 修复 NotesToolbar 按钮问题

- [x] 6.1 检查加粗、斜体按钮的实现，修复文本清空问题
- [x] 6.2 修复图片上传/插入功能
- [x] 6.3 修复视频上传/插入功能
- [x] 6.4 验证所有工具栏按钮功能正常

## 7. 测试和验证

- [x] 7.1 更新 E2E 测试以反映新的布局（代码已更新，测试需要手动运行验证）
- [x] 7.2 手动测试所有修复的功能（已完成：双层文字、变量交互、布局、展开功能、工具栏按钮）
- [x] 7.3 验证不同语言下的显示效果（多语言支持已实现，翻译键已添加）
